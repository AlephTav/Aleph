# Aleph\Core\Exception #

## Общая информация ##

|||
| --- | --- |
| **Наследование** | Exception |
| **Дочерние классы** | нет |
| **Интерфейсы** | нет |
| **Файл** | lib/core/exception.php |

Класс **Aleph\Core\Exception** используется для генерации типизированных исключений внутри фрэймворка, предоставляя методы позволяющие легко идентифицировать тип возникшего исключения по его токену. Токены ошибок представляют собой имена констант, определяющих сообщения об ошибках и определённых в классах где эти ошибки могут произойти. 

## Общедоступные нестатические методы ##

### **__construct()**

```php
public void __construct(string|object $class, string $token, mixed $var1, mixed $var2, ... )
```

||||
| --- | --- | --- |
| **$class** | string, object | класс, содержащий токен ошибки. |
| **$token** | string | токен ошибки или, что тоже самое, имя константы определяющей шаблон сообщения об ошибке. |
| **$var1**, **$var2**, ... | mixed | параметры токена ошибки. |

Конструктор класса. Генерирует сообщение об ошибке по её токену. Под токеном ошибки понимается строковая константа, чьё значение является шаблоном сообщения об ошибке. Константа может принадлежать некоторому классу, либо быть определенной вне класса. 

Шаблон сообщения об ошибке может содержать параметры, которые задаются в формате PHP функции **sprintf()**. Во время генерации исключения эти параметры заменяются на соответствующие значения. Подстановка значений осуществляется слева направо​.

В зависимости от значений аргументов конструктора могут быть три главных случая формирования сообщения об ошибке:
- Токен ошибки представляет собой строку не принадлежащую какому-либо классу. В этом случае первый параметр конструктора будет пустым или равен FALSE. Например:

    ```php
    // Покажет 'Simple error: 1, 2';
    throw new Aleph\Core\Exception(false, 'Simple error: %s, %s', 1, 2);
    ```
-   Токен ошибки является константой некоторого класса. Исключение выбрасывается внутри этого класса. Пример:

    ```php
    class A
    {
      const ERR_1 = '%s error template%s';

      public function test()
      {
        throw new Aleph\Core\Exception($this, 'ERR_1', 'Test', '!');
      }
    }

    // Выведет 'Test error template! (Token: A::ERR_1)'
    (new A)->test();
    ```
-   Токен ошибки является константой некоторого класса. Исключение выбрасывается за пределами этого класса. Пример:

    ```php
    class A
    {
      const ERR_1 = '%s error template%s';
    }

    // Выбросит исключение 'Test error template! (Token: A::ERR_1)'
    throw new Aleph\Core\Exception('A', 'ERR_1', 'Test', '!');

    // Можно записать более компактно (с тем же самым результатом):
    throw new Aleph\Core\Exception('A::ERR_1', 'Test', '!');
    ```

### **getClass()**

```php
public string getClass()
```

Возвращает имя класса содержащего токен ошибки. Если токен ошибки не принадлежит к какому-либо классу, то метод вернёт пустую строку.

### **getToken()**

```php
public string getToken()
```

Возвращает токен ошибки.

### **getInfo()**

```php
public array getInfo()
```

Анализирует исключение и возвращает детальную информацию о нём. Анализ исключение осуществляется с помощью метода **Aleph::analyzeException()**.

## Защищённые нестатические свойства ##

### **class**

```php
protected string $class
```

Хранит имя класса, содержащего токен ошибки. Если токен ошибки не принадлежит какому-либо классу, то значением свойства будет пустая строка.

### **token**

```php
protected string $token
```

Содержит токен ошибки.