Обзор фрэймворка
================

На рисунке ниже представлена концептуальная схема фрэймворка Aleph:

![](<../../resources/Aleph Structure (en).png>)

Фрэймворк условно можно разделить на две части: внутреннюю и внешнюю. Внутренняя
часть фрэймворка сама по себе является полноценным микрофрэймворком и является
фундаментом для построения внешней части реализуемой в виде набора различных
модулей.

Микрофрэймворк состоит из базового класса \\Aleph, являющегося его ядром, и
вспомогательных классов, без которых невозможна работа фрэймворка. Ядро (класс
\\Aleph) предоставляет следующий функционал:

    -   Перехват ошибок и исключений, а также их анализ.

    -   Логирование информации об ошибках и исключениях, а также простые
        средства профилирования кода.

    -   Автоматическую подгрузку классов, интерфейсов и трэйтов.

    -   Средства конфигурирования фрэймворка и приложения построенного на его
        основе.

    -   Централизованное хранение глобальных объектов (шаблон проектирования
        Registry).

Вспомогательные классы ядра можно условно объеденить по функциональному признаку
в следующие  5 групп:

    -   Класс обработки исключений. Исключение данного типа генерируют все
        классы фрэймворка. Вы можете использовать его для определения
        конкретного вида ошибки и класса, в котором возникло исключение.

    -   Класс для обработки обратных ссылок в формате фрэймворка. Данный класс
        позволяет вызывать функции, а также различные методы классов посредством
        использования строк определённого формата, называемых обратными
        ссылками. Эти ссылки представляют собой ни что иное, как строковую
        запись (в спец. формате) названий методов классов или функций.

    -   Система кэширования. Кэш используется модулями фрэймворка для хранения
        различного рода информации, как то: шаблоны страниц, данные локализации,
        структура бизнес модели приложения (ORM), статистика вызова sql запросов
        и т.д.

    -   Класс для работы с шаблонами. Aleph имеет простой в использовании и
        эффективный шаблонизатор использующий php в качестве языка шаблонизации.
        Шаблонизатор является частью XHTML-парсера модуля POM.

    -   Классы обеспечиващие маршрутизацию HTTP-запросов. С помощью этих классов
        возможно реализовать полноценное MVC приложение либо API приложение.

Внешнюю часть фрэймворка можно разделить по функциональному признаку на 6
модулей (групп классов):

    -   Слой взаимодействия с реляционной базой данных. Классы данного модуля
        используют PDO расширение для доступа к основным типам реляционных баз
        данных и предоставляют базовый функционал для работы с базой данных
        (выборка, редактирование и удаление данных).

    -   ORM (Object-relational mapping) слой. С помощью этого модуля становится
        возможным создать промежуточный слой между непосредственно базой данных
        и веб-приложением, отвечающий требуемой бизнес логики приложения и
        представляющий собой совокупность автоматически генерируемых классов
        соотвествующих логическим сущностям в логике работы приложения. С
        помощью такого слоя становится возможным прозрачно преобразовывать
        логические (абстрактные) сущности в реальные объекты базы данных.

    -   POM (Page Object Model) модуль. Включает в себя парсер шаблонов
        XHTML-страниц и систему контролов с помощью которых создаются веб-формы
        и интерфейс web 2.0 (с использованием Ajax подхода). Ключевой
        особенностью контролов является то, что каждый контрол существует как на
        клиенте (в виде некоторой функции) так и на сервере (в виде объекта
        соотвествующего класса), а значит возможны прозрачные манипуляции с
        интерфейсом сайта не только на клиенте, но и на стороне сервера.

    -   Модуль API. Состоит из классов предназначенных для конструирования
        различного рода RESTful API. Помимо базового класса API имеются классы
        для фильтрации и валидации данных. Данный модуль связан с ядром
        фрэймворка через маршрутизатор запросов.

    -   Модуль веб-компонентов. Представляет собой компилятор веб-компонентов из
        их шаблонов, а также javascript библиотеку для функционирования
        веб-компонентов на клиенте. Под веб-компонентом понимается совокупность
        html, js и css кода, связанных единой логикой и существующих как единое
        целое. При  этом, в отличие от POM, веб-компоненты существуют только на
        строне клиента и непосредственно встраиваются в DOM.

    -   Модуль утилит. Набор несвязанных между собой вспомогательных классов для
        облегчения различного рода задач: работа с датой и временем,
        локализация, нестандартные операции с массивами и строками, разбиение
        php скриптов на токены, получение информации о php объектах и т.д.
        Вполне возможно, что в будущем некоторые из этих классов превратятся в
        полноценные модули.
