Aleph\\Core\\Template
=====================



Общая информация
----------------

**Наследование:** нет

**Дочерние классы:** нет

**Интерфейсы:** ArrayAccess

**Источник:** `lib/core/template.php`



Является основным шаблонизатором фрэймворка. В качестве языка шаблонов
применяется php. Класс предоставляет простой и удобный способ манипулирования
переменными шаблонов, а также поддерживает вложенные шаблоны с возможностью их
кэширования.

Переменные шаблонов могут быть глобальными, т.е. видимыми во всех шаблонах,
работа с которыми осуществляется через класс Template и локальными - видимыми
только в том шаблоне для которого они установлены.

Доступ к глобальным переменным шаблонов осуществляется через интерфейс
ArrayAccess (а также через статические методы класса). Доступ к локальным
переменным конкретного шаблона осуществляется через перегрузку свойств.
Следующий пример демонстрирует работу с глобальными и локальными переменными
шаблонов:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
// Устанавливаем массив глобальных переменных
Template::setGlobals(['gv1' => 1, 'gv2' => 2]);

// Начинаем работу с некоторым шаблоном
$tpl = new Template($template);
// Определяем локальную переменную "foo"
$tpl->foo = 'test';
// Переопределяем глобальную переменную "gv1",
// определив локальную переменную с таким же именем
$tpl->gv1 = 2;
// Изменяем значение глобальной переменной "gv2"
$tpl['gv2'] = 1;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Как следует из примера приоритет локальных переменных выше чем приоритет
глобальных. Это значит что, если шаблон имеет какую-либо локальную переменную,
название которой совпадает с глобальной переменной, то при обработке шаблона
будет взято значение локальной переменной.



Общедоступные нестатические свойства
------------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public integer $expire = 0
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Время жизни кэша шаблона в секундах.



Общедоступные статические методы
--------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public static array getGlobals()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает массив глобальных переменных шаблонов.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public static void setGlobals(array $globals, boolean $merge = false)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$globals** - массив глобальных переменных шаблонов.

    -   **$merge** - если равен TRUE, то произойдёт слияние старых переменных и
        новых. В противном случае новые переменные полностью заменят старые.

Позволяет установить глобальные переменные шаблонов.



Общедоступные нестатические методы
----------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void __construct(string $template = null, integer $expire = 0, string $cacheID = null, Aleph\Cache\Cache $cache = null)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$template** - строка шаблона, либо путь к файлу шаблона.

    -   **$expire** - время жизни кэша шаблона в секундах.

    -   **$cacheID** - уникальный идентификатор кэша шаблона.

    -   **$cache** - объект кэширования.

Конструктор класса. Позволяет задавать шаблон и устанавливать его кэширование.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public Aleph\Cache\Cache getCache()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает объект кэширования шаблона. Если объект кэширования не был
установлен, то будет использован объект кэширования возвращаемый методом
`Aleph::cache()`.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void setCache(Aleph\Cache\Cache $cache)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$cache** - объект кэширования.

Устанавливает объект кэширования шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string getCacheID()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает уникальный идентификатор кэша шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void setCacheID(string $cacheID)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$cacheID** - уникальный идентификатор кэша шаблона.

Устанавливает уникальный идентификатор кэша шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public boolean isExpired()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает TRUE, если время жизни кэша истекло или не было установлено (свойство
expire равно 0). В остальных случаях возвращает FALSE.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public array getVars()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает  массив переменных шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void setVars(array $variables, boolean $merge = false)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$vars** - массив переменных шаблона.

    -   **$merge** - если равен TRUE, то произойдёт слияние старых переменных и
        новых. В противном случае новые переменные полностью заменят старые.

Устанавливает переменные шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string getTemplate()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает шаблон.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void setTemplate(string $template)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$template** - новый шаблон.

Устанавливает шаблон для обработки.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public mixed offsetGet(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя глобальной переменной шаблонов.

Возвращает значение глобальной переменной шаблона. Если переменной с таким
имененм не существует, то метод вернёт NULL.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void offsetSet(string $name, mixed $value)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя глобальной переменной шаблонов.

    -   **$value** - значение глобальной переменной.

Устанавливает значение глобальной переменной шаблонов.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public boolean offsetExists(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя глобальной переменной шаблонов.

Возвращает TRUE, если глобальная переменная с таким именем существует и её
значение не равно NULL. В противном случае возвращает FALSE.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void offsetUnset(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя глобальной переменной шаблонов.

Удаляет глобальную переменную шаблонов по её имени.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public mixed __get(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя переменной шаблона.

Возвращает значение локальной переменной шаблона. Если переменной с таким
имененм не существует, то метод вернёт NULL.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void __set(string $name, mixed $value)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя переменной шаблона.

    -   **$value** - значение переменной.

Устанавливает значение локальной переменной шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public boolean __isset(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя переменной шаблона.

Возвращает TRUE, если локальная переменная шаблона с таким именем существует и
её значение не равно NULL. В противном случае возвращает FALSE.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void __unset(string $name)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$name** - имя переменной шаблона.

Удаляет локальную переменную шаблона по её имени.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string render()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Обрабатывает шаблон и возвращает результат. В случае, если используется
кэширование шаблона и его уникальный идентификатор не установлен, то в качестве
идентификатора будет взят md5 хэш шаблона.

>   Если вы многократно используете одинаковые шаблоны, обязательно явно
>   определяйте идентификатор кэша. В противном случае произойдёт коллизия кэшей
>   шаблонов.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void show()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Обрабатывает шаблон и выводит результат в браузер.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string __toString()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Конвертирует объект класса Aleph\\Core\\Template в строку. Значением строки
является обработанный шаблон.



Защищённые статические свойства
-------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected static array $globals = []
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Хранит массив глобальных переменных шаблонов.



Защищённые нестатические свойства
---------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected Aleph\Cache\Cache $cache
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Объект кэширования шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected string $cacheID
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Уникальный идентификатор кэша шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected array $vars = []
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Массив локальных переменных шаблона.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected string $template
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Строка шаблона или путь к файлу шаблона.
