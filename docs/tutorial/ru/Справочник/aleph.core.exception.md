Aleph\\Core\\Exception
======================



Общая информация
----------------

**Наследование:** Exception

**Дочерние классы:** нет

**Интерфейсы:** нет

**Источник:** `lib/core/exception.php`



Класс Aleph\\Core\\Exception используется для генерации типизированных
исключений в пределах фрэймворка и содержит методы позволяющие легко
идентифицировать тип возникшей ошибки по её токену.



Общедоступные нестатические методы
----------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public void __construct(string|object $class, string $token, mixed $var1, mixed $var2, ... )
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:**

    -   **$class** - класс содержащий токен ошибки.

    -   **$token** - токен ошибки, название константы шаблона ошибки
        определённой в некотором классе.

    -   Параметры шаблона (токена) ошибки.

Конструктор класса исключения. Формирует сообщение об ошибке по её токену. Под
токеном ошибки понимается некоторая строковая константа, значением которой
является шаблон ошибки. Константа может принадлежать какому-либо классу.

Шаблон сообщения об ошибке может содержать внутри себя переменные, задаваемые
как [{var}]. При формировании конечного сообщения об ошибке эти переменные будут
заменены на соотвествующие значения. Замена происходит слева направо.

В зависимости от значения параметров конструктора возможны три основных случая
формирования сообщения об ошибке:

-   В качестве токена ошибки используется обычная параметризованная строка, не
    являющаяся константой какого-либо класса. В этом случае первый параметр
    равен пустой строке или FALSE. Пример:

    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    // Получим ошибку 'Simple error: 1, 2';
    throw new Aleph\Core\Exception(false, 'Simple error: [{var}], [{var}]', 1, 2);
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-   Шаблон ошибки определён как константа некоторого класса. Исключение
    формируется внутри этого класса. Пример:

    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    class A
    {
      const ERR_1 = '[{var}] error template[{var}]';

      public function test()
      {
        throw new Aleph\Core\Exception($this, 'ERR_1', 'Test', '!');
      }
    }

    // Получим сообщение 'Test error template! (Token: A::ERR_1)'
    (new A)->test();
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-   Шаблон ошибки задан как константа некоторого класса. Исключение формируется
    за пределами этого класса. Пример:

    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    class A
    {
      const ERR_1 = '[{var}] error template[{var}]';
    }

    // Выбросит сообщение 'Test error template! (Token: A::ERR_1)'
    throw new Aleph\Core\Exception('A', 'ERR_1', 'Test', '!');

    // Также возможен более компактный вариант записи (с тем же результатом):
    throw new Aleph\Core\Exception('A::ERR_1', 'Test', '!');
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string getClass()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает имя класса, содержащего токен ошибки. Если токен ошибки не привязан к
какому-либо классу, то метод вернёт пустую строку.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public string getToken()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Возвращает токен ошибки.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
public array getInfo()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Параметры:** нет

Анализирует исключение и возвращает информацию о нём. Анализ исключения
проводится с помощью метода `Aleph::analyzeException`.



Защищённые нестатические свойства
---------------------------------



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected string $class
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Хранит имя класса, содержащего токен ошибки. Если токен ошибки не привязан к
конкретному классу, то значением свойства является пустая строка.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
protected string $token
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Содержит значение токена ошибки.
